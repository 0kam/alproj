
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>alproj.project module &#8212; alproj v0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="alproj.gcp module" href="alproj.gcp.html" />
    <link rel="prev" title="alproj.surface module" href="alproj.surface.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="alproj.gcp.html" title="alproj.gcp module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="alproj.surface.html" title="alproj.surface module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">alproj v0.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-alproj.project">
<span id="alproj-project-module"></span><h1>alproj.project module<a class="headerlink" href="#module-alproj.project" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="alproj.project.modelview_mat">
<code class="descclassname">alproj.project.</code><code class="descname">modelview_mat</code><span class="sig-paren">(</span><em>pan_deg</em>, <em>tilt_deg</em>, <em>roll_deg</em>, <em>t_x</em>, <em>t_y</em>, <em>t_z</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alproj/project.html#modelview_mat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alproj.project.modelview_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an OpenGL-style modelview matrix from euler angles and camera location in world coordinate system.
See <a class="reference external" href="https://learnopengl.com/Getting-started/Coordinate-Systems">https://learnopengl.com/Getting-started/Coordinate-Systems</a> .</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pan_deg</strong> (<em>float</em>) – Pan angle in degrees</li>
<li><strong>tilt_deg</strong> (<em>float</em>) – Tilt angle n degrees</li>
<li><strong>roll_deg</strong> (<em>float</em>) – Roll angle in degrees</li>
<li><strong>t_x</strong> (<em>float</em>) – X-axis (latitudinal) coordinate of the cameralocation in a (planer) giographic coordinate system.</li>
<li><strong>t_y</strong> (<em>float</em>) – Y-axis (longitudinal) coordinate of the cameralocation in a (planer) giographic coordinate system.</li>
<li><strong>t_x</strong> – Z-axis (elevational) coordinate of the cameralocation in a (planer) giographic coordinate system.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>modelview_mat</strong> – A modelview matrix.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="alproj.project.persp_proj">
<code class="descclassname">alproj.project.</code><code class="descname">persp_proj</code><span class="sig-paren">(</span><em>vert</em>, <em>value</em>, <em>ind</em>, <em>params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alproj/project.html#persp_proj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alproj.project.persp_proj" title="Permalink to this definition">¶</a></dt>
<dd><p>3D to 2D perspective projection of vertices, with given camera parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>vert</strong> (<em>numpy.ndarray</em>) – Coordinates of vertices, in X(latitudial), Z(vertical), Y(longitudial) order.</li>
<li><strong>value</strong> (<em>numpy.ndarray</em>) – Values of vertices. e.g. colors, giographic coordinates.</li>
<li><strong>ind</strong> (<em>numpy.ndarray</em>) – Index data of vertices. See <a class="reference external" href="http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-9-vbo-indexing/">http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-9-vbo-indexing/</a> .</li>
<li><strong>paramas</strong> (<em>dict</em>) – <p>Camera parameters.</p>
<dl class="docutils">
<dt>x <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The latitudial coordinate of the shooting point in planaer (e.g. UTM) coordinate reference systems.</dd>
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The longitudial coordinate of the shooting point.</dd>
<dt>z <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The vertical coordinate of the shooting point, the unit of z must be the same as x and y (e.g. m).</dd>
<dt>fov <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Field of View in degree.</dd>
<dt>pan <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Pan angle in degree. North is 0 degree and East is 90 degree. The rotation angles (pan, tilt, roll) follows the OpenCV’s left-handed coordinate system.</dd>
<dt>tilt <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Tilt angle in degree. 0 indecates that the camera is horizontal. A positive value indicates that the camera looks up.</dd>
<dt>roll <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Roll angle in degree. A positive value indicates that camera leans to the right.</dd>
<dt>w <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Image width in pixel.</dd>
<dt>h <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Image height in pixel</dd>
<dt>cx <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>X coordinate of the principle point</dd>
<dt>cy <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Y coordinate of the principle point</dd>
<dt>a1 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Distortion coefficients that calibrates non-equal aspect ratio of each pixels.</dd>
<dt>a2 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Distortion coefficients that calibrates non-equal aspect ratio of each pixels.</dd>
<dt>k1, k2, k3, k4, k5, k6 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Radial distortion coefficients.</dd>
<dt>p1, p2 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Tangental distortion coefficients.</dd>
<dt>s1, s2, s3, s4 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Prism distortion coefficients.</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>raw</strong> – Projected result.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="alproj.project.projection_mat">
<code class="descclassname">alproj.project.</code><code class="descname">projection_mat</code><span class="sig-paren">(</span><em>fov_x_deg</em>, <em>w</em>, <em>h</em>, <em>near=-1</em>, <em>far=1</em>, <em>cx=None</em>, <em>cy=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alproj/project.html#projection_mat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alproj.project.projection_mat" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an OpenGL-style projection matrix from Field of View, width, and height of an image.
See <a class="reference external" href="https://learnopengl.com/Getting-started/Coordinate-Systems">https://learnopengl.com/Getting-started/Coordinate-Systems</a> .</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fov_x_deg</strong> (<em>float</em>) – Field of View in degrees.</li>
<li><strong>w</strong> (<em>int</em>) – Width in pixels</li>
<li><strong>h</strong> (<em>int</em>) – Height in pixels</li>
<li><strong>near</strong> (<em>float default -1</em>) – Z-axis coordinate of near plane.</li>
<li><strong>far</strong> (<em>float default 1</em>) – Z-axis coordinate of far plane.</li>
<li><strong>cx</strong> (<em>float default None</em>) – X-axis coordinate of principal point. If None, w/2.</li>
<li><strong>cy</strong> (<em>float default None</em>) – Y-axis coordinate of prinsipal point. If None, h/2.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>projection_mat</strong> – A projection matrix.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="alproj.project.reverse_proj">
<code class="descclassname">alproj.project.</code><code class="descname">reverse_proj</code><span class="sig-paren">(</span><em>array, vert, ind, params, chnames=['B', 'G', 'R']</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alproj/project.html#reverse_proj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alproj.project.reverse_proj" title="Permalink to this definition">¶</a></dt>
<dd><p>2D to 3D reverse-projection (geo-rectification) of given array, onto given surface, with given camera parameters.
Reverse-projected array will be returned as pandas.DataFrame with channel names, coordinates in the original array,
and coordinates in the giographic coordinate system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array</strong> (<em>numpy.ndarray</em>) – Target array, such as landscape photograph. The shape of the array must be (height, width, channels).</li>
<li><strong>vert</strong> (<em>numpy.ndarray</em>) – Vertex coordinates of the surface.</li>
<li><strong>ind</strong> (<em>numpy.ndarray</em>) – Index array that shows which three poits shape a triangle. See <a class="reference external" href="http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-9-vbo-indexing/">http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-9-vbo-indexing/</a> .</li>
<li><strong>params</strong> (<em>dict</em>) – Camera parameters. See alproj.project.persp_proj</li>
<li><strong>chnames</strong> (<em>list of str default</em><em> [</em><em>&quot;B&quot;</em><em>, </em><em>&quot;G&quot;</em><em>, </em><em>&quot;R&quot;</em><em>]</em>) – Channel names of the target array. Default value is [“B”,”G”,”R”] because channel order is BGR in OpenCV.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>df</strong> – Reverse-projected result with column
- u , v : The x and y axis coordinates in the original array.
- x, y, z : The latitudial, longitudial, and vertical coordinates in the reverse-projected coordinate system.
- [chnames] : The channel names passed by chnames, such as B, G, R.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="alproj.project.sim_image">
<code class="descclassname">alproj.project.</code><code class="descname">sim_image</code><span class="sig-paren">(</span><em>vert</em>, <em>color</em>, <em>ind</em>, <em>params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alproj/project.html#sim_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alproj.project.sim_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders a simulated image of landscape with given surface and camera parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>vert</strong> (<em>numpy.ndarray</em>) – Vertex coordinates of the surface returned by alproj.surface.crop().</li>
<li><strong>color</strong> (<em>numpy.ndarray</em>) – Vertex colors in RGB, returned by alproj.surface.crop()</li>
<li><strong>ind</strong> (<em>numpy.ndarray</em>) – Index data of vertices, returned by alproj.surface.crop().</li>
<li><strong>params</strong> (<em>dict</em>) – Camera parameters. See alproj.project.persp_proj().</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>img</strong> – Rendered image in OpenCV’s image format.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="alproj.surface.html"
                        title="previous chapter">alproj.surface module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="alproj.gcp.html"
                        title="next chapter">alproj.gcp module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/alproj.project.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="alproj.gcp.html" title="alproj.gcp module"
             >next</a> |</li>
        <li class="right" >
          <a href="alproj.surface.html" title="alproj.surface module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">alproj v0.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Ryotaro Okamoto.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>